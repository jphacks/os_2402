# Gin/Go

This directory contains the code for the backend server using Gin/Go.
It provides a GraphQL API in a modular monolith configuration.

## Directory structure

```shell
.
├── services
│   ├── {service_name}
│   │   ├── domain          # Stores domain objects in the Domain layer
│   │   ├── userinterface   # Place a Controller for the UI layer of the submodule. call from main module
│   │   ├── infrastructure  # Infrastructure layer Repository implementation
│   │   ├── application     # Stores application services in the Application layer. Call this directly when called directly from another context
│   │   ├── injection       # Generates a factory function that injects dependencies into the factory functions of the userinterface layer and application layer.
│   │   │   ├── wire.go     # Building a Provider function for google/wire
│   │   │   └── wire_gen.go # Contains dependency-injected factory functions automatically generated by google/wire
│   │   ├── go.mod
│   │   ├── go.sum
│   │   └── README.md
│   ├── job                # Package for batch processing system
│   ├── middleware         # Contains Gin middleware
├── go.mod
├── go.sum
├── go.work                # Go Workspace settings file
├── handlers.go            # Contains the handler functions for the API
├── main.go                # Entry point of the application
└── README.md
```

## Libraries

- [Gin](https://gin-gonic.com/)
- [ent](https://entgo.io/)
- [Atlas](https://atlasgo.io/)
- [Google Wire](https://github.com/google/wire)

## App overview

This application communicates with the frontend via GraphQL and REST API. Each service is designed specifically for a domain and is divided into four main layers:

- Domain - Stores domain objects and implements business logic.
- User Interface - Controller layer handles requests from the UI.
- Infrastructure - Repository layer that includes interaction with databases and external services.
- Application - Provides application services and is called directly by other services or controllers.

## How to start development

```shell
moon setup
```

The `mooo setup` command will install the required Dart packages, such as Mise and Melos.

## ToDo list required after creating a new repository using this template

1. Create an environment variable configuration file in `.env` and set various keys for the database and API.
2. Update GraphQL schema and queries as needed
3. Add test cases including validation of API requests and responses

## How to create a new package

If the project name and the output directory name of the package are the same,
`--project-name` can be omitted.

```shell
# Package
flutter create -t package packages/{directory_name} --project-name {project_name}
# App
flutter create --org jp.co.altive services/{directory_name} --project-name {project_name}
```
